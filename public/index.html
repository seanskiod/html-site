<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrandRank Resource Hub</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        :root {
            /* Light mode colors */
            --bg-primary: #f5f5f5;
            --bg-secondary: white;
            --bg-accent: #e6f3ff;
            --bg-accent-hover: #bee3f8;
            --text-primary: #333;
            --text-secondary: #64748b;
            --text-accent: #3182ce;
            --border-color: #e2e8f0;
            --border-accent: #3182ce;
            --input-bg: #f7fafc;
            --modal-bg: rgba(0, 0, 0, 0.5);
            --shadow-color: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(0, 0, 0, 0.15);
        }

        [data-theme="dark"] {
            /* Dark mode colors */
            --bg-primary: #1a202c;
            --bg-secondary: #2d3748;
            --bg-accent: #2a4a6b;
            --bg-accent-hover: #3c5a7a;
            --text-primary: #f7fafc;
            --text-secondary: #a0aec0;
            --text-accent: #63b3ed;
            --border-color: #4a5568;
            --border-accent: #63b3ed;
            --input-bg: #4a5568;
            --modal-bg: rgba(0, 0, 0, 0.7);
            --shadow-color: rgba(0, 0, 0, 0.3);
            --shadow-hover: rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Top Navigation Bar */
        .top-nav {
            background-color: #3182ce;
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 999;
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        .nav-logo-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-logo {
            width: 20px;
            height: 20px;
        }

        .nav-brand-text {
            color: white;
            font-size: 0.9rem;
            font-weight: 800;
            letter-spacing: 1px;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 6px;
            border-radius: 6px;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .theme-toggle svg {
            width: 18px;
            height: 18px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px 30px 20px; /* Reduced top padding for smaller nav */
        }

        .brand-title {
            font-size: 6rem;
            font-weight: 900;
            color: #3182ce;
            text-align: center;
            margin-bottom: 2px;
            letter-spacing: 4px;
            font-family: 'Inter', sans-serif;
        }

        .brand-subtitle {
            font-size: 1.5rem;
            color: #3182ce;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 300;
        }

        .search-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .search-input {
            width: 100%;
            max-width: 500px;
            padding: 15px 25px;
            font-size: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 50px;
            background-color: #f7fafc;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            border-color: #3182ce;
        }

        .search-input::placeholder {
            color: #a0aec0;
        }

        .upload-button {
            display: block;
            margin: 20px auto;
            background-color: #3182ce;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-button:hover {
            background-color: #2c5282;
            transform: translateY(-2px);
        }

        .upload-button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }

        .section-title {
            font-size: 2rem;
            font-weight: bold;
            color: #3182ce;
            text-align: center;
            margin-bottom: 30px;
        }

        .view-all-button {
            display: block;
            margin: 20px auto;
            background-color: #3182ce;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-all-button:hover {
            background-color: #2c5282;
            transform: translateY(-1px);
        }

        .back-to-main-button {
            background-color: #3182ce;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .back-to-main-button:hover {
            background-color: #2c5282;
        }

        .uploads-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: 700px;
            margin: 0 auto;
        }

        .upload-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 25px;
            background-color: #e6f3ff;
            border: 2px solid #3182ce;
            border-radius: 50px;
            transition: all 0.3s ease;
        }

        .upload-item:hover {
            background-color: #bee3f8;
            transform: translateY(-2px);
        }

        .upload-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .upload-title {
            font-size: 1.1rem;
            color: #3182ce;
            font-weight: 600;
        }

        .upload-meta {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .upload-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .tag-pill {
            background-color: #dbeafe;
            color: #1e40af;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .upload-date {
            font-size: 0.8rem;
            color: #64748b;
        }

        .upload-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .view-button {
            background-color: #3182ce;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .view-button:hover {
            background-color: #2c5282;
        }

        .edit-button, .delete-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .edit-button {
            color: #059669;
        }

        .delete-button {
            color: #dc2626;
        }

        .edit-button:hover {
            background-color: #ecfdf5;
        }

        .delete-button:hover {
            background-color: #fee2e2;
        }

        .uploads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .upload-card {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }

        .upload-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: #3182ce;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a365d;
            margin-bottom: 10px;
            flex: 1;
        }

        .card-actions-header {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .card-edit, .card-delete {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .card-edit {
            color: #059669;
        }

        .card-delete {
            color: #dc2626;
        }

        .card-edit:hover {
            background-color: #ecfdf5;
        }

        .card-delete:hover {
            background-color: #fee2e2;
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 15px;
        }

        .card-tag {
            background-color: #dbeafe;
            color: #1e40af;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .card-date {
            font-size: 0.8rem;
            color: #64748b;
        }

        .card-view-btn {
            background-color: #3182ce;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .card-view-btn:hover {
            background-color: #2c5282;
        }

        .all-uploads-page {
            display: none;
        }

        .all-uploads-page.active {
            display: block;
        }

        .empty-state, .no-results, .loading-state, .error-state {
            text-align: center;
            padding: 40px 20px;
            color: #64748b;
            font-size: 1.1rem;
        }

        .error-state {
            color: #dc2626;
        }

        .no-results.hidden, .empty-state.hidden, .loading-state.hidden, .error-state.hidden {
            display: none;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 1.8rem;
            color: #3182ce;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1a365d;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #3182ce;
        }

        .tag-input-container {
            position: relative;
        }

        .tag-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e2e8f0;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 150px;
            overflow-y: auto;
            z-index: 10;
            display: none;
        }

        .tag-dropdown.active {
            display: block;
        }

        .tag-suggestion {
            padding: 10px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f1f5f9;
            transition: background-color 0.2s ease;
        }

        .tag-suggestion:hover {
            background-color: #f0f9ff;
        }

        .tag-suggestion:last-child {
            border-bottom: none;
        }

        .selected-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .selected-tag {
            background-color: #dbeafe;
            color: #1e40af;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .remove-tag {
            background: none;
            border: none;
            color: #1e40af;
            cursor: pointer;
            font-size: 1rem;
            line-height: 1;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .btn-cancel {
            background-color: #e2e8f0;
            color: #64748b;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-submit {
            background-color: #3182ce;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-submit:hover {
            background-color: #2c5282;
        }

        .btn-submit:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }

        /* File Viewer Styles */
        .file-viewer-page {
            display: none;
        }

        .file-viewer-page.active {
            display: block;
        }

        .back-button {
            background-color: #3182ce;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .back-button:hover {
            background-color: #2c5282;
        }

        .file-info {
            background-color: var(--bg-secondary);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            margin-bottom: 20px;
        }

        .file-content-container {
            background-color: var(--bg-secondary);
            border-radius: 15px;
            border: 2px solid var(--border-color);
            overflow: hidden;
        }

        .file-content-header {
            background-color: #3182ce;
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-content-logo {
            width: 24px;
            height: 24px;
        }

        .file-iframe {
            width: 100%;
            height: 600px;
            border: none;
            overflow: auto;
        }

        /* Horizontal scroll for iframe content */
        .file-content-container {
            overflow-x: auto;
            overflow-y: hidden;
        }

        @media (max-width: 768px) {
            .container {
                padding: 60px 15px 30px 15px;
            }

            .brand-title {
                font-size: 3rem;
                letter-spacing: 2px;
            }

            .brand-subtitle {
                font-size: 1.2rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .upload-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .upload-actions {
                align-self: flex-end;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .nav-brand-text {
                font-size: 0.8rem;
            }

            .nav-logo {
                width: 16px;
                height: 16px;
            }

            .action-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .upload-button {
                padding: 12px 30px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Top Navigation Bar -->
    <div class="top-nav">
        <div class="nav-logo-container">
            <svg class="nav-logo" viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 0 C7.1061983 1.75449586 13.15529728 4.43834891 19.3046875 8.36328125 C22.44646179 10.2711123 25.6987573 11.89268812 29 13.5 C33.1067828 15.50840661 37.10896236 17.59370041 41 20 C45.31623199 22.66694009 49.77626258 24.89370381 54.3359375 27.11328125 C59.95320994 29.89184642 65.29424995 33.07813948 70.66650391 36.29882812 C75.17244961 38.98008584 79.72359934 41.45504905 84.4375 43.75 C89.2638192 46.10255513 93.86691825 48.62753627 98.43164062 51.45019531 C107.51250015 56.92978621 117.05323498 61.65611001 126.48242188 66.5 C132.03691803 69.37650239 137.42813574 72.4185265 142.76879883 75.67382812 C145.62418181 77.37099853 148.56371357 78.82379369 151.5625 80.25 C157.80017279 83.27853601 163.7221296 86.73515094 169.66650391 90.29882812 C174.17244961 92.98008584 178.72359934 95.45504905 183.4375 97.75 C188.2628908 100.10210259 192.86527758 102.62631887 197.42895508 105.44873047 C204.45776217 109.68964209 211.78303858 113.42909459 219.07885742 117.18505859 C228.80750794 122.19506302 238.36797595 127.42579622 247.8371582 132.90942383 C253.24843352 136.0330899 258.69124998 138.92371098 264.31640625 141.64453125 C267.2892663 143.14610685 270.1358327 144.80066779 273 146.5 C276.85421995 148.7865709 280.72455862 150.9057976 284.75 152.875 C291.62754085 156.25108451 298.2582906 160.02433699 304.91357422 163.81347656 C308.37423758 165.78151119 311.8433244 167.73452284 315.3125 169.6875 C316.22563965 170.20340698 316.22563965 170.20340698 317.15722656 170.72973633 C325.38522151 175.36703428 333.68145777 179.86198925 342.07885742 184.18505859 C351.80750794 189.19506302 361.36797595 194.42579622 370.8371582 199.90942383 C376.24843352 203.0330899 381.69124998 205.92371098 387.31640625 208.64453125 C390.2892663 210.14610685 393.1358327 211.80066779 396 213.5 C399.85421995 215.7865709 403.72455862 217.9057976 407.75 219.875 C412.9704123 222.43823586 418.02946665 225.23570838 423.07958984 228.11401367 C430.87250677 232.53424345 438.77993518 236.74131369 446.68798828 240.95117188 C452.50050769 244.05943321 458.19747747 247.28523087 463.828125 250.71118164 C466.58439488 252.34678739 469.41795126 253.75093406 472.3125 255.125 C479.47086477 258.63782895 486.33568043 262.58958685 493.23486328 266.58300781 C499.39174199 270.12899457 505.61180984 273.37705185 512 276.48828125 C515.6568426 278.33098709 519.12263789 280.40812506 522.609375 282.55078125 C528.44934771 286.09102614 534.51904861 289.23021828 540.5703125 292.390625 C542.23448266 293.26021066 543.89854297 294.13000659 545.5625 295 C546.39604004 295.43578369 547.22958008 295.87156738 548.08837891 296.32055664 C553.02962415 298.91875858 557.83219056 301.65491637 562.58203125 304.58984375 C566.0625586 306.6196828 569.67698569 308.3559908 573.29321289 310.12939453 C578.79399365 312.84961676 584.13929207 315.8156735 589.48901367 318.81982422 C596.2187504 322.58970686 603.01090679 326.23668428 609.8125 329.875 C618.91419965 334.74788142 627.91023917 339.76981064 636.84619141 344.93945312 C642.79869987 348.36478886 648.8379887 351.48875126 655.01171875 354.4921875 C658.59867722 356.30207766 661.97488183 358.36683877 665.390625 360.4765625 C669.02554215 362.59874467 672.7957501 364.41645456 676.57324219 366.26928711 C681.12811355 368.52184936 685.52956806 370.97994867 689.92285156 373.53564453 C696.04445453 377.07165401 702.27097948 380.40784135 708.5 383.75 C709.62607666 384.35457031 710.75215332 384.95914062 711.91235352 385.58203125 C714.18584999 386.80261335 716.45936875 388.02315395 718.73291016 389.24365234 C732.22472612 396.49668806 745.61916504 403.89962901 758.92919922 411.48095703 C765.22161789 415.04640785 771.57973215 418.36553284 778.08203125 421.52734375 C781.65118895 423.32864556 785.01088915 425.38922005 788.41015625 427.48828125 C791.35564412 429.20759317 794.37089841 430.69496905 797.4375 432.1875 C827.95797244 447.3307355 827.95797244 447.3307355 833.16015625 458.48828125 C834.90825918 463.71632862 834.75467541 468.95931553 832.625 474.0625 C826.42893467 484.48595369 814.03421149 489.33317052 803.5625 494.375 C801.25780064 495.50212022 798.95532626 496.6337 796.65292358 497.76550293 C795.14663584 498.50559831 793.63966512 499.2443054 792.13198853 499.98156738 C786.70096854 502.63977009 781.3294074 505.3929981 776 508.25 C767.53352609 512.77242822 758.94674769 517.04156148 750.35205078 521.31420898 C743.30920328 524.82311768 736.34271416 528.43742379 729.421875 532.1796875 C725.02904375 534.51651325 720.57733964 536.72326661 716.11865234 538.9309082 C711.20220421 541.37485065 706.34362907 543.91507522 701.5 546.5 C694.20688821 550.38642299 686.84813292 554.11779916 679.44433594 557.78808594 C662.20616288 566.33485891 645.01234311 574.93914083 628.09765625 584.11328125 C621.72721706 587.56072532 615.32547613 590.83399366 608.75 593.875 C597.9530349 598.86983454 587.50475891 604.50639557 577.02734375 610.1328125 C568.97401282 614.45470035 560.8540293 618.6164528 552.66601562 622.67724609 C546.83641656 625.56962409 541.01071262 628.46978909 535.1875 631.375 C534.52823517 631.70387207 533.86897034 632.03274414 533.18972778 632.37158203 C524.80640324 636.55702208 516.46853461 640.81361804 508.19995117 645.22216797 C500.59135396 649.25917964 492.87507459 653.07886153 485.16320801 656.91326904 C477.01538922 660.96648349 468.92087476 665.1023541 460.88769531 669.37841797 C453.96054553 673.05346276 446.94495888 676.54200591 439.921875 680.02929688 C434.0045338 682.97539522 428.14957841 686.01277894 422.33447266 689.1550293 C417.31631425 691.85769962 412.22709792 694.40155743 407.11962891 696.93041992 C401.57140727 699.6884217 396.09168306 702.56482188 390.63720703 705.50366211 C383.17566589 709.50030587 375.57801656 713.23085307 368 717 C344.88664372 728.44348689 344.88664372 728.44348689 321.99682617 740.32373047 C315.06153709 744.00958573 308.03176103 747.50312739 301 751 C290.67545141 756.13625901 280.42132955 761.3848318 270.24316406 766.80566406 C258.70602239 772.94842604 247.13190398 778.99521933 235.42089844 784.79980469 C215.52627537 794.64331547 215.52627537 794.64331547 195.84350586 804.90039062 C190.66217718 807.66988636 185.42263295 810.30505301 180.15771484 812.91137695 C174.89508288 815.52722598 169.69305953 818.24895218 164.5 821 C158.01541442 824.43523985 151.49442708 827.7758375 144.91796875 831.03125 C139.43668469 833.755481 134.02474655 836.60095853 128.63623047 839.50415039 C121.17503306 843.50074544 113.57741001 847.23039285 106 851 C80.77954488 863.4695617 80.77954488 863.4695617 55.8046875 876.41870117 C45.46880819 881.91862582 34.94787019 887.0679576 24.46240234 892.27490234 C22.01688052 893.49335229 19.5745316 894.71695088 17.13525391 895.94775391 C16.49932816 896.26794998 15.8634024 896.58814606 15.20820618 896.91804504 C13.4295219 897.81416446 11.65186449 898.71232125 9.87426758 899.6105957 C5.7557867 901.6014455 2.66486198 902.18207189 -1.875 902.25 C-2.90367188 902.27578125 -3.93234375 902.3015625 -4.9921875 902.328125 C-8.41220687 901.95503198 -10.25025853 901.03027507 -13 899 C-16.23788772 892.52422456 -13.97436509 884.04899981 -11.875 877.5625 C-9.77811899 871.59754919 -7.20452605 865.88879349 -4.47265625 860.1875 C-2.54863416 856.0230384 -0.94698934 851.76723094 0.62890625 847.4609375 C1.7864749 844.5389836 3.02917981 841.70626124 4.33984375 838.8515625 C7.04329872 832.96066062 9.53471306 826.99372888 12 821 C14.83646807 814.103837 17.76370616 807.27288064 20.875 800.49609375 C22.36024678 797.20070245 23.68840046 793.8684261 25 790.5 C26.65707789 786.24432268 28.4054504 782.0777763 30.31640625 777.9296875 C33.66168812 770.6333937 36.66570928 763.19795228 39.69506836 755.76660156 C42.35118099 749.25882544 45.05694601 742.79742581 48.03515625 736.4296875 C51.09723403 729.87842773 53.81882331 723.21453182 56.5 716.5 C59.16044526 709.83738636 61.85609765 703.2235355 64.90234375 696.7265625 C68.56794121 688.88911532 71.80591361 680.8883683 75.0625 672.875 C78.51587545 664.38680547 81.97196558 655.92581492 85.81811523 647.60595703 C88.00238343 642.7898284 89.98859632 637.89022519 92 633 C94.83646807 626.103837 97.76370616 619.27288064 100.875 612.49609375 C102.36024678 609.20070245 103.68840046 605.8684261 105 602.5 C106.65600282 598.24708366 108.40295987 594.0829713 110.3125 589.9375 C113.39960615 583.20409631 116.19696375 576.35482693 119 569.5 C122.12657201 561.85396617 125.30151449 554.24735722 128.75830078 546.74316406 C130.59901617 542.67665243 132.3204944 538.56232211 134.04467773 534.4453125 C135.47211336 531.04248613 136.92348362 527.65042574 138.375 524.2578125 C139.89084843 520.6964179 141.34314052 517.14411604 142.625 513.4921875 C143.8472543 510.24011802 144.91112417 507.76248539 147 505 C149.45166016 504.11816406 149.45166016 504.11816406 152.3515625 503.765625 C153.42881592 503.62705078 154.50606934 503.48847656 155.6159668 503.34570312 C156.73269775 503.23162109 157.84942871 503.11753906 159 503 C160.0310083 502.89107422 161.0620166 502.78214844 162.12426758 502.66992188 C165.55996553 502.33486033 168.9977625 502.0405989 172.4375 501.75 C187.50888447 500.42518625 202.53286443 498.72923737 217.5625 497 C233.15913712 495.20727213 248.74972995 493.42862496 264.38696289 492.02539062 C271.95713499 491.33671403 279.5011099 490.48924513 287.05078125 489.60546875 C302.58030843 487.78981476 318.13179742 486.20725557 333.68652344 484.625 C347.82958564 483.18405124 361.96000344 481.67786925 376.07969666 480.02282715 C384.39877585 479.05359054 392.71938765 478.23228993 401.0625 477.5 C411.59237788 476.55145173 422.08761255 475.43481472 432.57861328 474.12280273 C440.68598285 473.12282901 448.80439376 472.32220258 456.9375 471.5625 C467.95982525 470.53117132 478.94768832 469.33047353 489.9375 468 C501.78358771 466.56667997 513.63234236 465.32884361 525.51626587 464.25537109 C535.43702272 463.35792351 545.32730843 462.31014319 555.21826172 461.13134766 C568.45910572 459.56544875 581.73002604 458.29102041 595 457 C583.23683532 454.49630621 571.44215904 452.37571669 559.5625 450.5 C548.31378179 448.72049988 537.12083272 446.76646682 525.9453125 444.57421875 C519.82213351 443.38044247 513.69285925 442.21873185 507.5625 441.0625 C506.88020325 440.93368439 506.19790649 440.80486877 505.49493408 440.67214966 C494.42805925 438.58813623 483.33618285 436.70484364 472.22094727 434.89477539 C463.28023941 433.42213995 454.38922925 431.7552513 445.5 430 C435.60540919 428.0470797 425.70547423 426.23910844 415.75 424.625 C403.29595271 422.60506322 390.89862978 420.33424409 378.5 418 C364.67220682 415.39711773 350.83950263 412.91846383 336.95263672 410.65014648 C327.58720305 409.11569323 318.27172515 407.38806105 308.95703125 405.57421875 C302.84929054 404.38817135 296.7383635 403.21916821 290.625 402.0625 C289.94806091 401.93434906 289.27112183 401.80619812 288.57366943 401.67416382 C278.32372118 399.74084494 268.05331918 397.99809955 257.75 396.375 C248.74166665 394.95450651 239.78404246 393.44386282 230.85473633 391.59155273 C222.73843548 389.91654854 214.59058669 388.42052852 206.4375 386.9375 C205.3554126 386.74043961 205.3554126 386.74043961 204.25146484 386.53939819 C196.05734876 385.05072206 187.85983567 383.62256784 179.625 382.375 C177.48762935 382.04033212 175.35114453 381.70091519 173.21533203 381.35644531 C171.62597117 381.10071831 170.0356819 380.85073616 168.44482422 380.60449219 C165.81079333 380.18501445 163.18746272 379.72260285 160.5625 379.25 C159.76215332 379.12931152 158.96180664 379.00862305 158.13720703 378.88427734 C153.78613995 378.05357632 152.40632212 377.55202349 149.6796875 373.84765625 C149.08912113 372.57893463 148.52962221 371.29534687 148 370 C147.71213623 369.3704541 147.42427246 368.7409082 147.12768555 368.09228516 C146.23971454 366.13671447 145.39766672 364.16614376 144.5625 362.1875 C142.66729368 357.77356498 140.76222118 353.39810701 138.5625 349.125 C135.84775445 343.82902097 133.48080502 338.38980599 131.08227539 332.94580078 C128.94476906 328.10252058 126.75731487 323.28853801 124.5 318.5 C121.92460486 313.03224933 119.44178745 307.52867468 117 302 C112.94676805 292.82843196 108.72078401 283.7461334 104.4296875 274.68359375 C99.94424323 265.16015048 95.67706105 255.54502975 91.41455078 245.91992188 C87.70871622 237.56342242 83.91066363 229.26237954 80 221 C72.29716213 204.591252 64.62778807 188.1598115 57.421875 171.52587891 C54.42007299 164.61848715 51.2126924 157.81097996 48 151 C43.88880831 142.2774489 39.8810765 133.5187295 35.98291016 124.69873047 C32.26214376 116.29868222 28.36124087 107.98679974 24.4296875 99.68359375 C19.94326716 90.15807811 15.67417563 80.54126006 11.41235352 70.91333008 C8.74462321 64.89552437 6.05954381 58.89050198 3.25 52.9375 C-0.32094047 45.36013851 -3.73313487 37.71865353 -7.09082031 30.04492188 C-7.90636343 28.21060686 -8.75943258 26.39308468 -9.6171875 24.578125 C-12.59655411 18.08074923 -14.44940298 12.17573277 -13 5 C-9.67304788 -0.30232994 -5.89519526 -1.04262131 0 0 Z " fill="white" transform="translate(130,89)"/>
            </svg>
            <div class="nav-brand-text">BRANDRANK.AI</div>
        </div>
        <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle">
            <svg id="lightIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"/>
            </svg>
            <svg id="darkIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2"/>
            </svg>
        </button>
    </div>

    <div class="container">
        <!-- Main Page -->
        <div id="mainPage">
            <h2 class="brand-title">BRANDRANK</h2>
            <h3 class="brand-subtitle">Resource Hub</h3>
            
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Search by name or tags..." oninput="filterFiles()">
            </div>

            <div class="action-buttons">
                <button class="upload-button" onclick="showUploadModal()">Upload New Resource</button>
                <button id="viewAllButton" class="view-all-button" onclick="showAllUploadsPage()">View All Resources</button>
            </div>
            
            <!-- Files Container -->
            <div id="loadingState" class="loading-state">
                Loading resources...
            </div>

            <div id="errorState" class="error-state hidden">
                Failed to load resources. 
                <button onclick="loadFiles()" class="upload-button" style="margin-top: 15px;">Retry</button>
            </div>

            <div id="emptyState" class="empty-state hidden">
                <div>No resources uploaded yet</div>
                <button class="upload-button" onclick="showUploadModal()" style="margin-top: 20px;">Upload your first resource</button>
            </div>

            <div id="noResults" class="no-results hidden">
                No resources match your search criteria
            </div>

            <!-- Search Results Container -->
            <div id="searchResults" class="search-results-container hidden">
                <h4 class="section-title" id="searchResultsTitle">Search Results:</h4>
                <div id="searchResultsList" class="uploads-list"></div>
            </div>
        </div>

        <!-- All Uploads Page -->
        <div id="allUploadsPage" class="all-uploads-page">
            <button class="back-to-main-button" onclick="showMainPage()">← Back to Home</button>
            
            <h2 class="brand-title" style="font-size: 4rem; margin-bottom: 2px;">BRANDRANK</h2>
            <h3 class="brand-subtitle" style="margin-bottom: 30px;">Resource Hub</h3>
            
            <div class="search-container">
                <input type="text" id="allSearchInput" class="search-input" placeholder="Search by name or tags..." oninput="filterAllFiles()">
            </div>
            
            <h4 class="section-title">ALL UPLOADS:</h4>
            
            <div id="allEmptyState" class="empty-state hidden">
                <div>No resources uploaded yet</div>
            </div>

            <div id="allNoResults" class="no-results hidden">
                No resources match your search criteria
            </div>
            
            <div id="allUploadsGrid" class="uploads-grid"></div>
        </div>

        <!-- File Viewer Page -->
        <div id="fileViewerPage" class="file-viewer-page">
            <button id="backButton" class="back-button" onclick="goBack()">← Back</button>
            
            <div class="file-info">
                <h2 id="fileTitle" style="color: #3182ce; margin-bottom: 15px; font-size: 1.5rem;"></h2>
                <div id="fileTags" style="margin-bottom: 10px;"></div>
                <div id="fileDate" class="upload-date"></div>
            </div>

            <div class="file-content-container">
                <div class="file-content-header">
                    <svg class="file-content-logo" viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 0 C7.1061983 1.75449586 13.15529728 4.43834891 19.3046875 8.36328125 C22.44646179 10.2711123 25.6987573 11.89268812 29 13.5 C33.1067828 15.50840661 37.10896236 17.59370041 41 20 C45.31623199 22.66694009 49.77626258 24.89370381 54.3359375 27.11328125 C59.95320994 29.89184642 65.29424995 33.07813948 70.66650391 36.29882812 C75.17244961 38.98008584 79.72359934 41.45504905 84.4375 43.75 C89.2638192 46.10255513 93.86691825 48.62753627 98.43164062 51.45019531 C107.51250015 56.92978621 117.05323498 61.65611001 126.48242188 66.5 C132.03691803 69.37650239 137.42813574 72.4185265 142.76879883 75.67382812 C145.62418181 77.37099853 148.56371357 78.82379369 151.5625 80.25 C157.80017279 83.27853601 163.7221296 86.73515094 169.66650391 90.29882812 C174.17244961 92.98008584 178.72359934 95.45504905 183.4375 97.75 C188.2628908 100.10210259 192.86527758 102.62631887 197.42895508 105.44873047 C204.45776217 109.68964209 211.78303858 113.42909459 219.07885742 117.18505859 C228.80750794 122.19506302 238.36797595 127.42579622 247.8371582 132.90942383 C253.24843352 136.0330899 258.69124998 138.92371098 264.31640625 141.64453125 C267.2892663 143.14610685 270.1358327 144.80066779 273 146.5 C276.85421995 148.7865709 280.72455862 150.9057976 284.75 152.875 C291.62754085 156.25108451 298.2582906 160.02433699 304.91357422 163.81347656 C308.37423758 165.78151119 311.8433244 167.73452284 315.3125 169.6875 C316.22563965 170.20340698 316.22563965 170.20340698 317.15722656 170.72973633 C325.38522151 175.36703428 333.68145777 179.86198925 342.07885742 184.18505859 C351.80750794 189.19506302 361.36797595 194.42579622 370.8371582 199.90942383 C376.24843352 203.0330899 381.69124998 205.92371098 387.31640625 208.64453125 C390.2892663 210.14610685 393.1358327 211.80066779 396 213.5 C399.85421995 215.7865709 403.72455862 217.9057976 407.75 219.875 C412.9704123 222.43823586 418.02946665 225.23570838 423.07958984 228.11401367 C430.87250677 232.53424345 438.77993518 236.74131369 446.68798828 240.95117188 C452.50050769 244.05943321 458.19747747 247.28523087 463.828125 250.71118164 C466.58439488 252.34678739 469.41795126 253.75093406 472.3125 255.125 C479.47086477 258.63782895 486.33568043 262.58958685 493.23486328 266.58300781 C499.39174199 270.12899457 505.61180984 273.37705185 512 276.48828125 C515.6568426 278.33098709 519.12263789 280.40812506 522.609375 282.55078125 C528.44934771 286.09102614 534.51904861 289.23021828 540.5703125 292.390625 C542.23448266 293.26021066 543.89854297 294.13000659 545.5625 295 C546.39604004 295.43578369 547.22958008 295.87156738 548.08837891 296.32055664 C553.02962415 298.91875858 557.83219056 301.65491637 562.58203125 304.58984375 C566.0625586 306.6196828 569.67698569 308.3559908 573.29321289 310.12939453 C578.79399365 312.84961676 584.13929207 315.8156735 589.48901367 318.81982422 C596.2187504 322.58970686 603.01090679 326.23668428 609.8125 329.875 C618.91419965 334.74788142 627.91023917 339.76981064 636.84619141 344.93945312 C642.79869987 348.36478886 648.8379887 351.48875126 655.01171875 354.4921875 C658.59867722 356.30207766 661.97488183 358.36683877 665.390625 360.4765625 C669.02554215 362.59874467 672.7957501 364.41645456 676.57324219 366.26928711 C681.12811355 368.52184936 685.52956806 370.97994867 689.92285156 373.53564453 C696.04445453 377.07165401 702.27097948 380.40784135 708.5 383.75 C709.62607666 384.35457031 710.75215332 384.95914062 711.91235352 385.58203125 C714.18584999 386.80261335 716.45936875 388.02315395 718.73291016 389.24365234 C732.22472612 396.49668806 745.61916504 403.89962901 758.92919922 411.48095703 C765.22161789 415.04640785 771.57973215 418.36553284 778.08203125 421.52734375 C781.65118895 423.32864556 785.01088915 425.38922005 788.41015625 427.48828125 C791.35564412 429.20759317 794.37089841 430.69496905 797.4375 432.1875 C827.95797244 447.3307355 827.95797244 447.3307355 833.16015625 458.48828125 C834.90825918 463.71632862 834.75467541 468.95931553 832.625 474.0625 C826.42893467 484.48595369 814.03421149 489.33317052 803.5625 494.375 C801.25780064 495.50212022 798.95532626 496.6337 796.65292358 497.76550293 C795.14663584 498.50559831 793.63966512 499.2443054 792.13198853 499.98156738 C786.70096854 502.63977009 781.3294074 505.3929981 776 508.25 C767.53352609 512.77242822 758.94674769 517.04156148 750.35205078 521.31420898 C743.30920328 524.82311768 736.34271416 528.43742379 729.421875 532.1796875 C725.02904375 534.51651325 720.57733964 536.72326661 716.11865234 538.9309082 C711.20220421 541.37485065 706.34362907 543.91507522 701.5 546.5 C694.20688821 550.38642299 686.84813292 554.11779916 679.44433594 557.78808594 C662.20616288 566.33485891 645.01234311 574.93914083 628.09765625 584.11328125 C621.72721706 587.56072532 615.32547613 590.83399366 608.75 593.875 C597.9530349 598.86983454 587.50475891 604.50639557 577.02734375 610.1328125 C568.97401282 614.45470035 560.8540293 618.6164528 552.66601562 622.67724609 C546.83641656 625.56962409 541.01071262 628.46978909 535.1875 631.375 C534.52823517 631.70387207 533.86897034 632.03274414 533.18972778 632.37158203 C524.80640324 636.55702208 516.46853461 640.81361804 508.19995117 645.22216797 C500.59135396 649.25917964 492.87507459 653.07886153 485.16320801 656.91326904 C477.01538922 660.96648349 468.92087476 665.1023541 460.88769531 669.37841797 C453.96054553 673.05346276 446.94495888 676.54200591 439.921875 680.02929688 C434.0045338 682.97539522 428.14957841 686.01277894 422.33447266 689.1550293 C417.31631425 691.85769962 412.22709792 694.40155743 407.11962891 696.93041992 C401.57140727 699.6884217 396.09168306 702.56482188 390.63720703 705.50366211 C383.17566589 709.50030587 375.57801656 713.23085307 368 717 C344.88664372 728.44348689 344.88664372 728.44348689 321.99682617 740.32373047 C315.06153709 744.00958573 308.03176103 747.50312739 301 751 C290.67545141 756.13625901 280.42132955 761.3848318 270.24316406 766.80566406 C258.70602239 772.94842604 247.13190398 778.99521933 235.42089844 784.79980469 C215.52627537 794.64331547 215.52627537 794.64331547 195.84350586 804.90039062 C190.66217718 807.66988636 185.42263295 810.30505301 180.15771484 812.91137695 C174.89508288 815.52722598 169.69305953 818.24895218 164.5 821 C158.01541442 824.43523985 151.49442708 827.7758375 144.91796875 831.03125 C139.43668469 833.755481 134.02474655 836.60095853 128.63623047 839.50415039 C121.17503306 843.50074544 113.57741001 847.23039285 106 851 C80.77954488 863.4695617 80.77954488 863.4695617 55.8046875 876.41870117 C45.46880819 881.91862582 34.94787019 887.0679576 24.46240234 892.27490234 C22.01688052 893.49335229 19.5745316 894.71695088 17.13525391 895.94775391 C16.49932816 896.26794998 15.8634024 896.58814606 15.20820618 896.91804504 C13.4295219 897.81416446 11.65186449 898.71232125 9.87426758 899.6105957 C5.7557867 901.6014455 2.66486198 902.18207189 -1.875 902.25 C-2.90367188 902.27578125 -3.93234375 902.3015625 -4.9921875 902.328125 C-8.41220687 901.95503198 -10.25025853 901.03027507 -13 899 C-16.23788772 892.52422456 -13.97436509 884.04899981 -11.875 877.5625 C-9.77811899 871.59754919 -7.20452605 865.88879349 -4.47265625 860.1875 C-2.54863416 856.0230384 -0.94698934 851.76723094 0.62890625 847.4609375 C1.7864749 844.5389836 3.02917981 841.70626124 4.33984375 838.8515625 C7.04329872 832.96066062 9.53471306 826.99372888 12 821 C14.83646807 814.103837 17.76370616 807.27288064 20.875 800.49609375 C22.36024678 797.20070245 23.68840046 793.8684261 25 790.5 C26.65707789 786.24432268 28.4054504 782.0777763 30.31640625 777.9296875 C33.66168812 770.6333937 36.66570928 763.19795228 39.69506836 755.76660156 C42.35118099 749.25882544 45.05694601 742.79742581 48.03515625 736.4296875 C51.09723403 729.87842773 53.81882331 723.21453182 56.5 716.5 C59.16044526 709.83738636 61.85609765 703.2235355 64.90234375 696.7265625 C68.56794121 688.88911532 71.80591361 680.8883683 75.0625 672.875 C78.51587545 664.38680547 81.97196558 655.92581492 85.81811523 647.60595703 C88.00238343 642.7898284 89.98859632 637.89022519 92 633 C94.83646807 626.103837 97.76370616 619.27288064 100.875 612.49609375 C102.36024678 609.20070245 103.68840046 605.8684261 105 602.5 C106.65600282 598.24708366 108.40295987 594.0829713 110.3125 589.9375 C113.39960615 583.20409631 116.19696375 576.35482693 119 569.5 C122.12657201 561.85396617 125.30151449 554.24735722 128.75830078 546.74316406 C130.59901617 542.67665243 132.3204944 538.56232211 134.04467773 534.4453125 C135.47211336 531.04248613 136.92348362 527.65042574 138.375 524.2578125 C139.89084843 520.6964179 141.34314052 517.14411604 142.625 513.4921875 C143.8472543 510.24011802 144.91112417 507.76248539 147 505 C149.45166016 504.11816406 149.45166016 504.11816406 152.3515625 503.765625 C153.42881592 503.62705078 154.50606934 503.48847656 155.6159668 503.34570312 C156.73269775 503.23162109 157.84942871 503.11753906 159 503 C160.0310083 502.89107422 161.0620166 502.78214844 162.12426758 502.66992188 C165.55996553 502.33486033 168.9977625 502.0405989 172.4375 501.75 C187.50888447 500.42518625 202.53286443 498.72923737 217.5625 497 C233.15913712 495.20727213 248.74972995 493.42862496 264.38696289 492.02539062 C271.95713499 491.33671403 279.5011099 490.48924513 287.05078125 489.60546875 C302.58030843 487.78981476 318.13179742 486.20725557 333.68652344 484.625 C347.82958564 483.18405124 361.96000344 481.67786925 376.07969666 480.02282715 C384.39877585 479.05359054 392.71938765 478.23228993 401.0625 477.5 C411.59237788 476.55145173 422.08761255 475.43481472 432.57861328 474.12280273 C440.68598285 473.12282901 448.80439376 472.32220258 456.9375 471.5625 C467.95982525 470.53117132 478.94768832 469.33047353 489.9375 468 C501.78358771 466.56667997 513.63234236 465.32884361 525.51626587 464.25537109 C535.43702272 463.35792351 545.32730843 462.31014319 555.21826172 461.13134766 C568.45910572 459.56544875 581.73002604 458.29102041 595 457 C583.23683532 454.49630621 571.44215904 452.37571669 559.5625 450.5 C548.31378179 448.72049988 537.12083272 446.76646682 525.9453125 444.57421875 C519.82213351 443.38044247 513.69285925 442.21873185 507.5625 441.0625 C506.88020325 440.93368439 506.19790649 440.80486877 505.49493408 440.67214966 C494.42805925 438.58813623 483.33618285 436.70484364 472.22094727 434.89477539 C463.28023941 433.42213995 454.38922925 431.7552513 445.5 430 C435.60540919 428.0470797 425.70547423 426.23910844 415.75 424.625 C403.29595271 422.60506322 390.89862978 420.33424409 378.5 418 C364.67220682 415.39711773 350.83950263 412.91846383 336.95263672 410.65014648 C327.58720305 409.11569323 318.27172515 407.38806105 308.95703125 405.57421875 C302.84929054 404.38817135 296.7383635 403.21916821 290.625 402.0625 C289.94806091 401.93434906 289.27112183 401.80619812 288.57366943 401.67416382 C278.32372118 399.74084494 268.05331918 397.99809955 257.75 396.375 C248.74166665 394.95450651 239.78404246 393.44386282 230.85473633 391.59155273 C222.73843548 389.91654854 214.59058669 388.42052852 206.4375 386.9375 C205.3554126 386.74043961 205.3554126 386.74043961 204.25146484 386.53939819 C196.05734876 385.05072206 187.85983567 383.62256784 179.625 382.375 C177.48762935 382.04033212 175.35114453 381.70091519 173.21533203 381.35644531 C171.62597117 381.10071831 170.0356819 380.85073616 168.44482422 380.60449219 C165.81079333 380.18501445 163.18746272 379.72260285 160.5625 379.25 C159.76215332 379.12931152 158.96180664 379.00862305 158.13720703 378.88427734 C153.78613995 378.05357632 152.40632212 377.55202349 149.6796875 373.84765625 C149.08912113 372.57893463 148.52962221 371.29534687 148 370 C147.71213623 369.3704541 147.42427246 368.7409082 147.12768555 368.09228516 C146.23971454 366.13671447 145.39766672 364.16614376 144.5625 362.1875 C142.66729368 357.77356498 140.76222118 353.39810701 138.5625 349.125 C135.84775445 343.82902097 133.48080502 338.38980599 131.08227539 332.94580078 C128.94476906 328.10252058 126.75731487 323.28853801 124.5 318.5 C121.92460486 313.03224933 119.44178745 307.52867468 117 302 C112.94676805 292.82843196 108.72078401 283.7461334 104.4296875 274.68359375 C99.94424323 265.16015048 95.67706105 255.54502975 91.41455078 245.91992188 C87.70871622 237.56342242 83.91066363 229.26237954 80 221 C72.29716213 204.591252 64.62778807 188.1598115 57.421875 171.52587891 C54.42007299 164.61848715 51.2126924 157.81097996 48 151 C43.88880831 142.2774489 39.8810765 133.5187295 35.98291016 124.69873047 C32.26214376 116.29868222 28.36124087 107.98679974 24.4296875 99.68359375 C19.94326716 90.15807811 15.67417563 80.54126006 11.41235352 70.91333008 C8.74462321 64.89552437 6.05954381 58.89050198 3.25 52.9375 C-0.32094047 45.36013851 -3.73313487 37.71865353 -7.09082031 30.04492188 C-7.90636343 28.21060686 -8.75943258 26.39308468 -9.6171875 24.578125 C-12.59655411 18.08074923 -14.44940298 12.17573277 -13 5 C-9.67304788 -0.30232994 -5.89519526 -1.04262131 0 0 Z " fill="white" transform="translate(130,89)"/>
                    </svg>
                    RESOURCE CONTENT
                </div>
                <iframe id="fileContent" class="file-iframe"></iframe>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">UPLOAD RESOURCE</h2>
            
            <form id="uploadForm">
                <div class="form-group">
                    <label class="form-label">Resource Title *</label>
                    <input type="text" id="titleInput" class="form-input" placeholder="Enter resource title..." required>
                </div>

                <div class="form-group">
                    <label class="form-label">Tags</label>
                    <div class="tag-input-container">
                        <input type="text" id="tagsInput" class="form-input" placeholder="Type to add tags..." oninput="handleTagInput()" onfocus="showTagDropdown()">
                        <div id="tagDropdown" class="tag-dropdown">
                            <div id="tagSuggestions"></div>
                        </div>
                    </div>
                    <div id="selectedTags" class="selected-tags"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">HTML File *</label>
                    <input type="file" id="fileInput" class="form-input" accept=".html,.htm" required>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="hideUploadModal()">Cancel</button>
                    <button type="submit" id="submitBtn" class="btn-submit">Upload Resource</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">EDIT RESOURCE</h2>
            
            <form id="editForm">
                <div class="form-group">
                    <label class="form-label">Resource Title *</label>
                    <input type="text" id="editTitleInput" class="form-input" placeholder="Enter resource title..." required>
                </div>

                <div class="form-group">
                    <label class="form-label">Tags</label>
                    <div class="tag-input-container">
                        <input type="text" id="editTagsInput" class="form-input" placeholder="Type to add tags..." oninput="handleEditTagInput()" onfocus="showEditTagDropdown()">
                        <div id="editTagDropdown" class="tag-dropdown">
                            <div id="editTagSuggestions"></div>
                        </div>
                    </div>
                    <div id="editSelectedTags" class="selected-tags"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="hideEditModal()">Cancel</button>
                    <button type="submit" id="editSubmitBtn" class="btn-submit">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global state
        let files = [];
        let filteredFiles = [];
        let allTags = [];
        let selectedUploadTags = [];
        let selectedEditTags = [];
        let currentPage = 'main';
        let isLoading = false;
        let editingFileId = null;

        // Theme management
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            setTheme(savedTheme);
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            updateThemeToggleIcon(theme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        function updateThemeToggleIcon(theme) {
            const lightIcon = document.getElementById('lightIcon');
            const darkIcon = document.getElementById('darkIcon');
            
            if (theme === 'dark') {
                lightIcon.style.display = 'none';
                darkIcon.style.display = 'block';
            } else {
                lightIcon.style.display = 'block';
                darkIcon.style.display = 'none';
            }
        }

        // Format date to EST timezone
        function formatDateEST(dateString) {
            if (!dateString) return 'Unknown';
            
            const date = new Date(dateString);
            return date.toLocaleString('en-US', {
                timeZone: 'America/New_York',
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                hour12: true
            }) + ' EST';
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize theme
            initializeTheme();
            
            loadFiles();
            
            // Setup upload form
            document.getElementById('uploadForm').addEventListener('submit', handleUpload);
            
            // Setup edit form
            document.getElementById('editForm').addEventListener('submit', handleEdit);
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#tagsInput') && !e.target.closest('#tagDropdown')) {
                    hideTagDropdown();
                }
                if (!e.target.closest('#editTagsInput') && !e.target.closest('#editTagDropdown')) {
                    hideEditTagDropdown();
                }
            });

            // Handle Enter key in tag inputs
            document.getElementById('tagsInput').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addTagFromInput();
                }
            });

            document.getElementById('editTagsInput').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addEditTagFromInput();
                }
            });

            // Close modals when clicking outside
            document.getElementById('uploadModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideUploadModal();
                }
            });

            document.getElementById('editModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideEditModal();
                }
            });
        });

        // Load files from database
        async function loadFiles() {
            if (isLoading) return;
            isLoading = true;

            try {
                showLoadingState();
                
                const response = await fetch('/api/files');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                files = data;
                updateTags();
                
                // Set filteredFiles to all files initially (no search filter)
                filteredFiles = [...files];
                
                renderFiles();
                hideLoadingState();
                
            } catch (error) {
                console.error('Error loading files:', error);
                showErrorState();
            } finally {
                isLoading = false;
            }
        }

        // Upload file to database
        async function handleUpload(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            
            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Uploading...';

                const title = document.getElementById('titleInput').value.trim();
                const fileInput = document.getElementById('fileInput');
                const file = fileInput.files[0];
                
                if (!file || !title) {
                    alert('Please provide both a title and select an HTML file');
                    return;
                }

                // Create FormData for upload
                const formData = new FormData();
                formData.append('title', title);
                formData.append('tags', JSON.stringify(selectedUploadTags));
                formData.append('file', file);

                const response = await fetch('/api/upload', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Upload failed');
                }

                // Reload files from database
                await loadFiles();
                renderAllFiles();
                hideUploadModal();
                
                // Reset form
                document.getElementById('uploadForm').reset();
                selectedUploadTags = [];
                updateSelectedTags();
                
                alert('Resource uploaded successfully!');

            } catch (error) {
                console.error('Upload error:', error);
                alert('Failed to upload resource: ' + error.message);
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        }

        // Edit file
        async function handleEdit(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('editSubmitBtn');
            const originalText = submitBtn.textContent;
            
            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Saving...';

                const title = document.getElementById('editTitleInput').value.trim();
                
                if (!title) {
                    alert('Please provide a title');
                    return;
                }

                const response = await fetch('/api/edit', {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        id: editingFileId,
                        title: title,
                        tags: selectedEditTags
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Edit failed');
                }

                // Reload files from database
                await loadFiles();
                renderAllFiles();
                hideEditModal();
                
                alert('Resource updated successfully!');

            } catch (error) {
                console.error('Edit error:', error);
                alert('Failed to update resource: ' + error.message);
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        }

        // Delete file from database
        async function deleteFile(fileId) {
            if (!confirm('Are you sure you want to delete this resource?')) {
                return;
            }

            try {
                const response = await fetch(`/api/delete?id=${fileId}`, {
                    method: 'DELETE'
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Delete failed');
                }
                
                // Reload files from database
                await loadFiles();
                renderAllFiles();
                
            } catch (error) {
                console.error('Error deleting file:', error);
                alert('Failed to delete file: ' + error.message);
            }
        }

        // Show edit modal
        function editFile(fileId) {
            const file = files.find(f => f.id == fileId);
            if (!file) return;

            editingFileId = fileId;
            document.getElementById('editTitleInput').value = file.title;
            selectedEditTags = [...(file.tags || [])];
            updateEditSelectedTags();
            
            document.getElementById('editModal').classList.add('active');
        }

        // UI State Management
        function showLoadingState() {
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('noResults').classList.add('hidden');
            document.getElementById('searchResults').classList.add('hidden');
        }

        function showErrorState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.remove('hidden');
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('noResults').classList.add('hidden');
            document.getElementById('searchResults').classList.add('hidden');
        }

        function hideLoadingState() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
        }

        // Tag management for upload
        function handleTagInput() {
            const input = document.getElementById('tagsInput');
            const value = input.value.toLowerCase();
            
            if (value.trim()) {
                showTagSuggestions(value);
            } else {
                hideTagDropdown();
            }
        }

        function showTagSuggestions(filter = '') {
            const dropdown = document.getElementById('tagDropdown');
            const suggestions = document.getElementById('tagSuggestions');
            
            const matching = allTags.filter(tag => 
                tag.toLowerCase().includes(filter.toLowerCase()) && 
                !selectedUploadTags.includes(tag)
            );
            
            suggestions.innerHTML = '';
            
            matching.forEach(tag => {
                const div = document.createElement('div');
                div.className = 'tag-suggestion';
                div.textContent = tag;
                div.onclick = () => addTag(tag);
                suggestions.appendChild(div);
            });
            
            const input = document.getElementById('tagsInput').value.trim();
            if (input && !allTags.includes(input) && !selectedUploadTags.includes(input)) {
                const div = document.createElement('div');
                div.className = 'tag-suggestion';
                div.style.fontWeight = 'bold';
                div.innerHTML = `Create: "${input}"`;
                div.onclick = () => addTag(input);
                suggestions.appendChild(div);
            }
            
            dropdown.classList.add('active');
        }

        function showTagDropdown() {
            showTagSuggestions();
        }

        function hideTagDropdown() {
            document.getElementById('tagDropdown').classList.remove('active');
        }

        function addTagFromInput() {
            const input = document.getElementById('tagsInput');
            const value = input.value.trim();
            if (value) {
                addTag(value);
            }
        }

        function addTag(tag) {
            if (!selectedUploadTags.includes(tag)) {
                selectedUploadTags.push(tag);
                updateSelectedTags();
            }
            document.getElementById('tagsInput').value = '';
            hideTagDropdown();
        }

        function removeUploadTag(tag) {
            selectedUploadTags = selectedUploadTags.filter(t => t !== tag);
            updateSelectedTags();
        }

        function updateSelectedTags() {
            const container = document.getElementById('selectedTags');
            container.innerHTML = '';
            
            selectedUploadTags.forEach(tag => {
                const span = document.createElement('span');
                span.className = 'selected-tag';
                span.innerHTML = `
                    ${escapeHtml(tag)}
                    <button class="remove-tag" onclick="removeUploadTag('${escapeHtml(tag)}')">×</button>
                `;
                container.appendChild(span);
            });
        }

        // Tag management for edit
        function handleEditTagInput() {
            const input = document.getElementById('editTagsInput');
            const value = input.value.toLowerCase();
            
            if (value.trim()) {
                showEditTagSuggestions(value);
            } else {
                hideEditTagDropdown();
            }
        }

        function showEditTagSuggestions(filter = '') {
            const dropdown = document.getElementById('editTagDropdown');
            const suggestions = document.getElementById('editTagSuggestions');
            
            const matching = allTags.filter(tag => 
                tag.toLowerCase().includes(filter.toLowerCase()) && 
                !selectedEditTags.includes(tag)
            );
            
            suggestions.innerHTML = '';
            
            matching.forEach(tag => {
                const div = document.createElement('div');
                div.className = 'tag-suggestion';
                div.textContent = tag;
                div.onclick = () => addEditTag(tag);
                suggestions.appendChild(div);
            });
            
            const input = document.getElementById('editTagsInput').value.trim();
            if (input && !allTags.includes(input) && !selectedEditTags.includes(input)) {
                const div = document.createElement('div');
                div.className = 'tag-suggestion';
                div.style.fontWeight = 'bold';
                div.innerHTML = `Create: "${input}"`;
                div.onclick = () => addEditTag(input);
                suggestions.appendChild(div);
            }
            
            dropdown.classList.add('active');
        }

        function showEditTagDropdown() {
            showEditTagSuggestions();
        }

        function hideEditTagDropdown() {
            document.getElementById('editTagDropdown').classList.remove('active');
        }

        function addEditTagFromInput() {
            const input = document.getElementById('editTagsInput');
            const value = input.value.trim();
            if (value) {
                addEditTag(value);
            }
        }

        function addEditTag(tag) {
            if (!selectedEditTags.includes(tag)) {
                selectedEditTags.push(tag);
                updateEditSelectedTags();
            }
            document.getElementById('editTagsInput').value = '';
            hideEditTagDropdown();
        }

        function removeEditTag(tag) {
            selectedEditTags = selectedEditTags.filter(t => t !== tag);
            updateEditSelectedTags();
        }

        function updateEditSelectedTags() {
            const container = document.getElementById('editSelectedTags');
            container.innerHTML = '';
            
            selectedEditTags.forEach(tag => {
                const span = document.createElement('span');
                span.className = 'selected-tag';
                span.innerHTML = `
                    ${escapeHtml(tag)}
                    <button class="remove-tag" onclick="removeEditTag('${escapeHtml(tag)}')">×</button>
                `;
                container.appendChild(span);
            });
        }

        // Update tags list
        function updateTags() {
            allTags = [...new Set(files.flatMap(file => file.tags || []))];
        }

        // Filter files (search functionality only)
        function filterFiles() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            filteredFiles = files.filter(file => {
                const matchesSearch = !searchTerm || 
                    file.title.toLowerCase().includes(searchTerm) ||
                    (file.tags || []).some(tag => tag.toLowerCase().includes(searchTerm));
                
                return matchesSearch;
            });
            
            renderFiles();
        }

        // Filter files for all uploads page
        function filterAllFiles() {
            const searchTerm = document.getElementById('allSearchInput').value.toLowerCase();
            
            filteredFiles = files.filter(file => {
                const matchesSearch = !searchTerm || 
                    file.title.toLowerCase().includes(searchTerm) ||
                    (file.tags || []).some(tag => tag.toLowerCase().includes(searchTerm));
                
                return matchesSearch;
            });
            
            renderAllFiles();
        }

        // Render files (shows search results when searching)
        function renderFiles() {
            const emptyState = document.getElementById('emptyState');
            const noResults = document.getElementById('noResults');
            const searchResults = document.getElementById('searchResults');
            const searchResultsList = document.getElementById('searchResultsList');
            const searchResultsTitle = document.getElementById('searchResultsTitle');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (isLoading) return;
            
            // Hide all states initially
            emptyState.classList.add('hidden');
            noResults.classList.add('hidden');
            searchResults.classList.add('hidden');
            searchResultsList.innerHTML = '';
            
            if (files.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            }
            
            // Only show search results if there's a search term
            if (searchTerm) {
                if (filteredFiles.length === 0) {
                    noResults.classList.remove('hidden');
                    return;
                }
                
                // Show search results
                searchResults.classList.remove('hidden');
                searchResultsTitle.textContent = `Search Results (${filteredFiles.length}):`;
                
                filteredFiles.forEach(file => {
                    const item = createFileItem(file);
                    searchResultsList.appendChild(item);
                });
            }
        }

        // Render all files for the all uploads page
        function renderAllFiles() {
            const allEmptyState = document.getElementById('allEmptyState');
            const allUploadsGrid = document.getElementById('allUploadsGrid');
            const allNoResults = document.getElementById('allNoResults');
            
            // Hide all states
            allEmptyState.classList.add('hidden');
            allUploadsGrid.innerHTML = '';
            allNoResults.classList.add('hidden');
            
            if (files.length === 0) {
                allEmptyState.classList.remove('hidden');
                return;
            }
            
            if (filteredFiles.length === 0) {
                allNoResults.classList.remove('hidden');
                return;
            }
            
            filteredFiles.forEach(file => {
                const card = createFileCard(file);
                allUploadsGrid.appendChild(card);
            });
        }

        // Create file item for list view
        function createFileItem(file) {
            const item = document.createElement('div');
            item.className = 'upload-item';
            
            const uploadDate = formatDateEST(file.uploadDate);
            
            item.innerHTML = `
                <div class="upload-content">
                    <div class="upload-title">${escapeHtml(file.title)}</div>
                    <div class="upload-meta">
                        <div class="upload-tags">
                            ${(file.tags || []).map(tag => 
                                `<span class="tag-pill">${escapeHtml(tag)}</span>`
                            ).join('')}
                        </div>
                        <div class="upload-date">${uploadDate}</div>
                    </div>
                </div>
                <div class="upload-actions">
                    <button class="edit-button" onclick="editFile('${file.id}')" title="Edit resource">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                            <path d="M834.3 705.7c0 82.2-66.8 149-149 149H325.9c-82.2 0-149-66.8-149-149V346.4c0-82.2 66.8-149 149-149h129.8v-42.7H325.9c-105.7 0-191.7 86-191.7 191.7v359.3c0 105.7 86 191.7 191.7 191.7h359.3c105.7 0 191.7-86 191.7-191.7V575.9h-42.7v129.8z"/>
                            <path d="M889.7 163.4c-22.9-22.9-53-34.4-83.1-34.4s-60.1 11.5-83.1 34.4L312 574.9c-16.9 16.9-27.9 38.8-31.2 62.5l-19 132.8c-1.6 11.4 7.3 21.3 18.4 21.3 0.9 0 1.8-0.1 2.7-0.2l132.8-19c23.7-3.4 45.6-14.3 62.5-31.2l411.5-411.5c45.9-45.9 45.9-120.3 0-166.2zM362 585.3L710.3 237 816 342.8 467.8 691.1 362 585.3zM409.7 730l-101.1 14.4L323 643.3c1.4-9.5 4.8-18.7 9.9-26.7L436.3 720c-8 5.2-17.1 8.7-26.6 10z m449.8-430.7l-13.3 13.3-105.7-105.8 13.3-13.3c14.1-14.1 32.9-21.9 52.9-21.9s38.8 7.8 52.9 21.9c29.1 29.2 29.1 76.7-0.1 105.8z"/>
                        </svg>
                    </button>
                    <button class="delete-button" onclick="deleteFile('${file.id}')" title="Delete resource">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                        </svg>
                    </button>
                    <button class="view-button" onclick="viewFile('${file.id}')">VIEW</button>
                </div>
            `;
            
            return item;
        }

        // Create file card for grid view
        function createFileCard(file) {
            const card = document.createElement('div');
            card.className = 'upload-card';
            
            const uploadDate = formatDateEST(file.uploadDate);
            
            card.innerHTML = `
                <div class="card-header">
                    <div class="card-title">${escapeHtml(file.title)}</div>
                    <div class="card-actions-header">
                        <button class="card-edit" onclick="editFile('${file.id}')" title="Edit resource">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                                <path d="M834.3 705.7c0 82.2-66.8 149-149 149H325.9c-82.2 0-149-66.8-149-149V346.4c0-82.2 66.8-149 149-149h129.8v-42.7H325.9c-105.7 0-191.7 86-191.7 191.7v359.3c0 105.7 86 191.7 191.7 191.7h359.3c105.7 0 191.7-86 191.7-191.7V575.9h-42.7v129.8z"/>
                                <path d="M889.7 163.4c-22.9-22.9-53-34.4-83.1-34.4s-60.1 11.5-83.1 34.4L312 574.9c-16.9 16.9-27.9 38.8-31.2 62.5l-19 132.8c-1.6 11.4 7.3 21.3 18.4 21.3 0.9 0 1.8-0.1 2.7-0.2l132.8-19c23.7-3.4 45.6-14.3 62.5-31.2l411.5-411.5c45.9-45.9 45.9-120.3 0-166.2zM362 585.3L710.3 237 816 342.8 467.8 691.1 362 585.3zM409.7 730l-101.1 14.4L323 643.3c1.4-9.5 4.8-18.7 9.9-26.7L436.3 720c-8 5.2-17.1 8.7-26.6 10z m449.8-430.7l-13.3 13.3-105.7-105.8 13.3-13.3c14.1-14.1 32.9-21.9 52.9-21.9s38.8 7.8 52.9 21.9c29.1 29.2 29.1 76.7-0.1 105.8z"/>
                            </svg>
                        </button>
                        <button class="card-delete" onclick="deleteFile('${file.id}')" title="Delete resource">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="card-tags">
                    ${(file.tags || []).map(tag => 
                        `<span class="card-tag">${escapeHtml(tag)}</span>`
                    ).join('')}
                </div>
                
                <div class="card-footer">
                    <div class="card-date">${uploadDate}</div>
                    <button class="card-view-btn" onclick="viewFile('${file.id}')">VIEW</button>
                </div>
            `;
            
            return card;
        }

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // View file
        function viewFile(fileId) {
            const file = files.find(f => f.id == fileId);
            if (!file) return;
            
            // Update file viewer
            document.getElementById('fileTitle').textContent = file.title;
            document.getElementById('fileDate').textContent = 
                `Uploaded: ${formatDateEST(file.uploadDate)}`;
            
            // Render tags
            const tagsContainer = document.getElementById('fileTags');
            tagsContainer.innerHTML = (file.tags || []).map(tag => 
                `<span class="tag-pill">${escapeHtml(tag)}</span>`
            ).join('');
            
            // Load content in iframe
            const iframe = document.getElementById('fileContent');
            if (typeof Blob !== 'undefined') {
                const blob = new Blob([file.content], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                iframe.src = url;
            } else {
                iframe.srcdoc = file.content;
            }
            
            // Show file viewer page
            showFileViewerPage();
        }

        // Go back to previous page
        function goBack() {
            if (currentPage === 'all') {
                showAllUploadsPage();
            } else {
                showMainPage();
            }
        }

        // Navigation functions
        function showMainPage() {
            currentPage = 'main';
            document.getElementById('mainPage').style.display = 'block';
            document.getElementById('allUploadsPage').classList.remove('active');
            document.getElementById('fileViewerPage').classList.remove('active');
        }

        function showAllUploadsPage() {
            currentPage = 'all';
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('allUploadsPage').classList.add('active');
            document.getElementById('fileViewerPage').classList.remove('active');
            
            // Initialize the all uploads page
            filteredFiles = [...files];
            renderAllFiles();
        }

        function showFileViewerPage() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('allUploadsPage').classList.remove('active');
            document.getElementById('fileViewerPage').classList.add('active');
        }

        function showUploadModal() {
            document.getElementById('uploadModal').classList.add('active');
            selectedUploadTags = [];
            updateSelectedTags();
        }

        function hideUploadModal() {
            document.getElementById('uploadModal').classList.remove('active');
            hideTagDropdown();
        }

        function hideEditModal() {
            document.getElementById('editModal').classList.remove('active');
            hideEditTagDropdown();
            editingFileId = null;
            selectedEditTags = [];
            updateEditSelectedTags();
        }
    </script>
</body>
</html>
